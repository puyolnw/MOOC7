# ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ (Task List)

## ‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á (Real Score System) - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°

### üéØ **Logic ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà:**
1. **‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á** - ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö % ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á (‡πÄ‡∏ä‡πà‡∏ô 70 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô = 100%)
2. **Quiz ‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á** - ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏£‡∏á (‡πÄ‡∏ä‡πà‡∏ô 10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡πà‡∏≠ quiz)
3. **Video Lessons = 0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô** - ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)
4. **Big Lesson = ‡∏ú‡∏•‡∏£‡∏ß‡∏° Quiz** - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Big Lesson = ‡∏ú‡∏•‡∏£‡∏ß‡∏° Quiz ‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô
5. **‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö User ‡∏Å‡∏≥‡∏´‡∏ô‡∏î** - ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° (‡πÄ‡∏ä‡πà‡∏ô 80% ‡∏Ç‡∏≠‡∏á 70 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô = 56 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)

---

### 1. ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á (Core Logic)

#### üìÅ **‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:**

**üóÑÔ∏è Database Files:**
```
back_creditbank/database.sql
‚îú‚îÄ‚îÄ ALTER TABLE public.subjects ADD COLUMN passing_percentage DECIMAL(5,2) DEFAULT 80.00
‚îú‚îÄ‚îÄ ALTER TABLE public.subjects ADD COLUMN auto_distribute_score BOOLEAN DEFAULT true  
‚îú‚îÄ‚îÄ ALTER TABLE public.quizzes ADD COLUMN weight_percentage DECIMAL(5,2) DEFAULT 0
‚îú‚îÄ‚îÄ ALTER TABLE public.quizzes ADD COLUMN is_fixed_weight BOOLEAN DEFAULT false
‚îú‚îÄ‚îÄ ALTER TABLE public.quizzes ADD COLUMN quiz_type VARCHAR(20) DEFAULT 'post_lesson'
‚îú‚îÄ‚îÄ ALTER TABLE public.quizzes ADD COLUMN subject_id INTEGER REFERENCES subjects(subject_id)
‚îú‚îÄ‚îÄ ALTER TABLE public.lessons ADD COLUMN weight_percentage DECIMAL(5,2) DEFAULT 0
‚îú‚îÄ‚îÄ ALTER TABLE public.lessons ADD COLUMN is_fixed_weight BOOLEAN DEFAULT false
‚îú‚îÄ‚îÄ ALTER TABLE public.lessons ADD COLUMN subject_id INTEGER REFERENCES subjects(subject_id)
‚îú‚îÄ‚îÄ ALTER TABLE public.enrollments ADD COLUMN total_percentage DECIMAL(5,2) DEFAULT 0
‚îú‚îÄ‚îÄ ALTER TABLE public.enrollments ADD COLUMN is_passed BOOLEAN DEFAULT false
‚îî‚îÄ‚îÄ ALTER TABLE public.enrollments ADD COLUMN pre_test_percentage DECIMAL(5,2) DEFAULT 0
```

**üîß Backend Files - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
back_creditbank/
‚îú‚îÄ‚îÄ routes/Courses/Subjects.js           ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° CRUD passing_percentage, auto_distribute_score
‚îÇ   ‚îú‚îÄ‚îÄ GET /api/subjects               ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå passing_percentage ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‚îÇ   ‚îú‚îÄ‚îÄ POST /api/subjects              ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° validation passing_percentage 0-100%
‚îÇ   ‚îú‚îÄ‚îÄ PUT /api/subjects/:id           ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó passing_percentage
‚îÇ   ‚îî‚îÄ‚îÄ DELETE /api/subjects/:id        ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö
‚îú‚îÄ‚îÄ routes/Courses/Quizzes.js            ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° logic auto-distribute ‡πÄ‡∏°‡∏∑‡πà‡∏≠ CRUD quiz
‚îÇ   ‚îú‚îÄ‚îÄ GET /api/quizzes                ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå weight_percentage, is_fixed_weight, quiz_type
‚îÇ   ‚îú‚îÄ‚îÄ POST /api/quizzes               ‚Üê auto-distribute weight ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á quiz ‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îú‚îÄ‚îÄ PUT /api/quizzes/:id            ‚Üê recalculate weight ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó
‚îÇ   ‚îî‚îÄ‚îÄ DELETE /api/quizzes/:id         ‚Üê redistribute weight ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö quiz
‚îú‚îÄ‚îÄ routes/Courses/Lessons.js            ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° logic auto-distribute ‡πÄ‡∏°‡∏∑‡πà‡∏≠ CRUD lesson
‚îÇ   ‚îú‚îÄ‚îÄ GET /api/lessons                ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå weight_percentage, is_fixed_weight
‚îÇ   ‚îú‚îÄ‚îÄ POST /api/lessons               ‚Üê auto-distribute weight ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á lesson ‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îú‚îÄ‚îÄ PUT /api/lessons/:id            ‚Üê recalculate weight ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó
‚îÇ   ‚îî‚îÄ‚îÄ DELETE /api/lessons/:id         ‚Üê redistribute weight ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö lesson
‚îú‚îÄ‚îÄ routes/Courses/Enrollments.js        ‚Üê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç logic ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì total_percentage, is_passed
‚îÇ   ‚îú‚îÄ‚îÄ GET /api/enrollments            ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå total_percentage, is_passed
‚îÇ   ‚îú‚îÄ‚îÄ PUT /api/enrollments/:id        ‚Üê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îî‚îÄ‚îÄ calculateProgress()             ‚Üê ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì progress ‡∏ï‡∏≤‡∏° weight
‚îî‚îÄ‚îÄ routes/Courses/QuizAttempts.js       ‚Üê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç logic ‡πÅ‡∏¢‡∏Å pre/post test, ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°
    ‚îú‚îÄ‚îÄ POST /api/quiz-attempts         ‚Üê ‡πÅ‡∏¢‡∏Å logic pre-test (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö%) vs post-test (‡∏ô‡∏±‡∏ö%)
    ‚îú‚îÄ‚îÄ PUT /api/quiz-attempts/:id      ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó total_percentage ‡πÉ‡∏ô enrollments
    ‚îî‚îÄ‚îÄ calculateFinalScore()           ‚Üê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏ï‡∏≤‡∏° weight
```

**üîß Backend Files - ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà:**
```
back_creditbank/
‚îú‚îÄ‚îÄ utils/scoreDistribution.js          ‚Üê ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
‚îÇ   ‚îú‚îÄ‚îÄ autoDistributeWeights()         ‚Üê ‡πÅ‡∏ö‡πà‡∏á % ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
‚îÇ   ‚îú‚îÄ‚îÄ recalculateWeights()            ‚Üê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì % ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
‚îÇ   ‚îú‚îÄ‚îÄ validateTotalPercentage()       ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏£‡∏ß‡∏° = 100%
‚îÇ   ‚îî‚îÄ‚îÄ getAvailablePercentage()        ‚Üê ‡∏´‡∏≤‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡πà‡∏á
‚îú‚îÄ‚îÄ utils/passingCalculation.js         ‚Üê ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô
‚îÇ   ‚îú‚îÄ‚îÄ calculateTotalScore()           ‚Üê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏à‡∏≤‡∏Å lessons + quizzes
‚îÇ   ‚îú‚îÄ‚îÄ checkPassingStatus()            ‚Üê ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà user ‡∏Å‡∏≥‡∏´‡∏ô‡∏î
‚îÇ   ‚îî‚îÄ‚îÄ updateEnrollmentStatus()        ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô/‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô
‚îú‚îÄ‚îÄ middleware/scoreValidation.js       ‚Üê validation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îú‚îÄ‚îÄ validateWeightChanges()         ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô weight
‚îÇ   ‚îú‚îÄ‚îÄ validatePassingCriteria()       ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô 0-100%
‚îÇ   ‚îî‚îÄ‚îÄ validatePercentageSum()         ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏£‡∏ß‡∏° weight = 100%
‚îî‚îÄ‚îÄ routes/Courses/ScoreManagement.js   ‚Üê API ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤
    ‚îú‚îÄ‚îÄ GET /api/subjects/:id/scores    ‚Üê ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ lessons + quizzes ‡∏û‡∏£‡πâ‡∏≠‡∏° weight
    ‚îú‚îÄ‚îÄ PUT /api/subjects/:id/scores    ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó weight ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
    ‚îî‚îÄ‚îÄ POST /api/subjects/:id/auto-distribute ‚Üê ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
```

**üóÑÔ∏è Database (SQL):**
```sql
-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á subjects ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô
ALTER TABLE public.subjects ADD COLUMN passing_percentage DECIMAL(5,2) DEFAULT 80.00;
ALTER TABLE public.subjects ADD COLUMN auto_distribute_score BOOLEAN DEFAULT true;

-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á quizzes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
ALTER TABLE public.quizzes ADD COLUMN weight_percentage DECIMAL(5,2) DEFAULT 0;
ALTER TABLE public.quizzes ADD COLUMN is_fixed_weight BOOLEAN DEFAULT false;
ALTER TABLE public.quizzes ADD COLUMN quiz_type VARCHAR(20) DEFAULT 'post_lesson'; -- 'pre_lesson', 'post_lesson'
```

---

### 2. ‡πÅ‡∏ó‡πá‡∏ö "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô" ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤
**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà**: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
**‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**:
- ‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏Ç‡πâ‡∏≤‡∏á ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå/‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ lessons + quizzes ‡πÉ‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ (Quiz = ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á, Video = 0 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)
- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Fix/Auto-distribute
- Real-time ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°

**üé® Frontend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
MOOC7/src/
‚îú‚îÄ‚îÄ dashboard/admin-creditbank/subjects/
‚îÇ   ‚îú‚îÄ‚îÄ AdminSubjectArea.tsx          ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ó‡πá‡∏ö "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô"
‚îÇ   ‚îú‚îÄ‚îÄ tabs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LessonsTab.tsx            ‚Üê ‡πÅ‡∏ó‡πá‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏î‡∏¥‡∏°
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InstructorsTab.tsx        ‚Üê ‡πÅ‡∏ó‡πá‡∏ö‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÄ‡∏î‡∏¥‡∏°  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ QuizzesTab.tsx            ‚Üê ‡πÅ‡∏ó‡πá‡∏ö‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏î‡∏¥‡∏°
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ScoreManagementTab.tsx    ‚Üê **‡πÅ‡∏ó‡πá‡∏ö‡πÉ‡∏´‡∏°‡πà** ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ       ‚îú‚îÄ‚îÄ ScoreItemList.tsx         ‚Üê ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ lessons + quizzes ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ       ‚îú‚îÄ‚îÄ ScoreAdjuster.tsx         ‚Üê ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
‚îÇ       ‚îú‚îÄ‚îÄ AutoDistributeButton.tsx  ‚Üê ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
‚îÇ       ‚îî‚îÄ‚îÄ ScoreSummary.tsx          ‚Üê ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° + validation
```

**üîß Backend API ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°:**
```
back_creditbank/routes/Courses/
‚îú‚îÄ‚îÄ ScoreManagement.js                ‚Üê **API ‡πÉ‡∏´‡∏°‡πà** ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤
‚îÇ   ‚îú‚îÄ‚îÄ GET /api/subjects/:id/scores  ‚Üê ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ lessons + quizzes ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îú‚îÄ‚îÄ PUT /api/subjects/:id/scores  ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ POST /api/subjects/:id/auto-distribute ‚Üê ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
```

---

### 3. ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô/‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà**: ‡πÅ‡∏¢‡∏Å logic ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
**‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**:
- Quiz ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏°‡∏µ `quiz_type` = 'pre_lesson' ‡∏´‡∏£‡∏∑‡∏≠ 'post_lesson'
- Pre-lesson: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ô‡∏≥‡∏°‡∏≤‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°
- Post-lesson: ‡∏ô‡∏≥‡∏°‡∏≤‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ pre-test ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ

**üîß Backend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
back_creditbank/
‚îú‚îÄ‚îÄ routes/Courses/
‚îÇ   ‚îú‚îÄ‚îÄ QuizAttempts.js               ‚Üê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç logic ‡πÅ‡∏¢‡∏Å pre/post test scoring
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ POST /api/quiz-attempts   ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö quiz_type ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ calculateScore()          ‚Üê ‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ post_lesson
‚îÇ   ‚îú‚îÄ‚îÄ Lessons.js                    ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° logic ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö pre-test ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GET /api/lessons/:id      ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ pre-test
‚îÇ   ‚îî‚îÄ‚îÄ Enrollments.js                ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó progress ‡∏ï‡∏≤‡∏° pre/post test
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îî‚îÄ‚îÄ lessonAccess.js               ‚Üê **middleware ‡πÉ‡∏´‡∏°‡πà** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö pre-test ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
‚îî‚îÄ‚îÄ utils/
    ‚îî‚îÄ‚îÄ preTestValidation.js          ‚Üê ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö pre-test
```

**üé® Frontend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
MOOC7/src/
‚îú‚îÄ‚îÄ components/courses/lesson/
‚îÇ   ‚îú‚îÄ‚îÄ LessonContent.tsx             ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö pre-test ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤
‚îÇ   ‚îú‚îÄ‚îÄ PreTestRequired.tsx           ‚Üê **component ‡πÉ‡∏´‡∏°‡πà** ‡πÅ‡∏à‡πâ‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ pre-test
‚îÇ   ‚îî‚îÄ‚îÄ LessonProgress.tsx            ‚Üê ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ pre/post test
‚îú‚îÄ‚îÄ components/courses/course-details/
‚îÇ   ‚îú‚îÄ‚îÄ QuizResultArea.tsx            ‚Üê ‡πÅ‡∏¢‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• pre-test ‡πÅ‡∏•‡∏∞ post-test
‚îÇ   ‚îî‚îÄ‚îÄ LessonList.tsx                ‚Üê ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ lock/unlock ‡∏ï‡∏≤‡∏° pre-test
‚îî‚îÄ‚îÄ dashboard/student-dashboard/
    ‚îî‚îÄ‚îÄ enrollments/
        ‚îî‚îÄ‚îÄ StudentProgressArea.tsx   ‚Üê ‡πÅ‡∏™‡∏î‡∏á progress ‡πÅ‡∏¢‡∏Å pre/post test
```

---

### 4. ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
**‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**:
- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì progress ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ
- ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á (‡πÄ‡∏ä‡πà‡∏ô 45/70 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)
- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô/‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà user ‡∏Å‡∏≥‡∏´‡∏ô‡∏î (‡πÄ‡∏ä‡πà‡∏ô 80% ‡∏Ç‡∏≠‡∏á 70 = 56 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)
- ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ pre-test ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏ó

**üîß Backend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
back_creditbank/
‚îú‚îÄ‚îÄ routes/Courses/
‚îÇ   ‚îî‚îÄ‚îÄ Enrollments.js                ‚Üê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç logic ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì progress ‡πÉ‡∏´‡∏°‡πà
‚îÇ       ‚îú‚îÄ‚îÄ GET /api/enrollments      ‚Üê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì total_score ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á
‚îÇ       ‚îî‚îÄ‚îÄ updateProgress()          ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó progress ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≥ lesson/quiz
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ progressCalculation.js        ‚Üê ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì progress ‡πÉ‡∏´‡∏°‡πà
‚îÇ       ‚îú‚îÄ‚îÄ calculateRealScore()      ‚Üê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏£‡∏ß‡∏°
‚îÇ       ‚îú‚îÄ‚îÄ updateEnrollmentStatus()  ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô
‚îÇ       ‚îî‚îÄ‚îÄ checkPreTestRequirement() ‚Üê ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö pre-test requirement
```

---

### 5. ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á API ‡πÅ‡∏•‡∏∞ Validation
**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç API ‡πÄ‡∏î‡∏¥‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° validation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
**‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**:
- API auto-distribute ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
- Validation ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö weight ‡∏£‡∏ß‡∏° = 100%
- API ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡πÅ‡∏ö‡∏ö real-time
- Error handling ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ edge cases

**üîß Backend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
back_creditbank/
‚îú‚îÄ‚îÄ routes/Courses/
‚îÇ   ‚îú‚îÄ‚îÄ Subjects.js                   ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° API ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ passing_percentage
‚îÇ   ‚îú‚îÄ‚îÄ Lessons.js                    ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° logic auto-distribute ‡πÄ‡∏°‡∏∑‡πà‡∏≠ CRUD
‚îÇ   ‚îú‚îÄ‚îÄ Quizzes.js                    ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° logic auto-distribute ‡πÄ‡∏°‡∏∑‡πà‡∏≠ CRUD
‚îÇ   ‚îî‚îÄ‚îÄ ScoreManagement.js            ‚Üê **API ‡πÉ‡∏´‡∏°‡πà** ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ scoreValidation.js            ‚Üê validation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ autoDistribute.js             ‚Üê **middleware ‡πÉ‡∏´‡∏°‡πà** auto-distribute
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ scoreDistribution.js          ‚Üê core logic ‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îú‚îÄ‚îÄ progressCalculation.js        ‚Üê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì progress ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îî‚îÄ‚îÄ errorHandling.js              ‚Üê ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ error cases
‚îî‚îÄ‚îÄ database.sql                      ‚Üê ‡∏£‡∏±‡∏ô ALTER TABLE statements
```

**üé® Frontend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
MOOC7/src/
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useScoreDistribution.ts       ‚Üê **hook ‡πÉ‡∏´‡∏°‡πà** ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îú‚îÄ‚îÄ useWeightValidation.ts        ‚Üê validation weight real-time
‚îÇ   ‚îî‚îÄ‚îÄ useProgressCalculation.ts     ‚Üê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì progress ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ scoreUtils.ts                 ‚Üê helper functions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ validationUtils.ts            ‚Üê validation utilities
‚îú‚îÄ‚îÄ components/common/
‚îÇ   ‚îú‚îÄ‚îÄ ScoreDistributionAlert.tsx    ‚Üê ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îú‚îÄ‚îÄ WeightValidationMessage.tsx   ‚Üê ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° validation weight
‚îÇ   ‚îî‚îÄ‚îÄ ProgressIndicator.tsx         ‚Üê ‡πÅ‡∏™‡∏î‡∏á progress ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
‚îî‚îÄ‚îÄ types/
    ‚îú‚îÄ‚îÄ scoring.ts                    ‚Üê interface ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡∏°‡πà
    ‚îî‚îÄ‚îÄ progress.ts                   ‚Üê interface ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö progress
```

---

### 6. UI/UX ‡πÅ‡∏•‡∏∞ Real-time Updates
**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà**: ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á UI ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ö‡∏ö real-time
**‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**:
- Real-time ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á weight
- UI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö fix/unfix weight ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
- Progress bar ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÉ‡∏´‡∏°‡πà
- Notification ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô

**üé® Frontend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
MOOC7/src/
‚îú‚îÄ‚îÄ components/scoring/
‚îÇ   ‚îú‚îÄ‚îÄ WeightSlider.tsx              ‚Üê **component ‡πÉ‡∏´‡∏°‡πà** ‡∏õ‡∏£‡∏±‡∏ö weight
‚îÇ   ‚îú‚îÄ‚îÄ FixWeightToggle.tsx           ‚Üê **component ‡πÉ‡∏´‡∏°‡πà** fix/unfix weight
‚îÇ   ‚îú‚îÄ‚îÄ AutoDistributePanel.tsx       ‚Üê **component ‡πÉ‡∏´‡∏°‡πà** panel ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
‚îÇ   ‚îú‚îÄ‚îÄ ScoreBreakdown.tsx            ‚Üê **component ‡πÉ‡∏´‡∏°‡πà** ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ PassingThreshold.tsx          ‚Üê **component ‡πÉ‡∏´‡∏°‡πà** ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô
‚îú‚îÄ‚îÄ components/progress/
‚îÇ   ‚îú‚îÄ‚îÄ WeightedProgressBar.tsx       ‚Üê progress bar ‡πÅ‡∏ö‡∏ö weighted
‚îÇ   ‚îú‚îÄ‚îÄ PassingStatusBadge.tsx        ‚Üê badge ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ PreTestIndicator.tsx          ‚Üê ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ pre-test
‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îú‚îÄ‚îÄ scoring.scss                  ‚Üê CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
‚îÇ   ‚îî‚îÄ‚îÄ progress.scss                 ‚Üê CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö progress
‚îî‚îÄ‚îÄ notifications/
    ‚îî‚îÄ‚îÄ scoreChangeNotification.tsx   ‚Üê notification ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
```

---

## üö® **‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠ API ‡πÄ‡∏î‡∏¥‡∏°**

### üìä **API Endpoints ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:**

#### **üî¥ ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏™‡∏π‡∏á - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
1. GET /api/courses/subjects              ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô 6+ ‡πÑ‡∏ü‡∏•‡πå Frontend
   - SubjectsArea.tsx, InstSubjectsArea.tsx, AddLessons.tsx, AddSubjects.tsx
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå: passing_percentage, total_units, units_description
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: Frontend ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ subjects

2. GET /api/courses/subjects/:id          ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô subject detail pages  
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå: passing_percentage, auto_distribute_score
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ß‡∏¥‡∏ä‡∏≤

3. GET /api/courses/subjects/:id/detailed ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô admin dashboard
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• weight_percentage ‡πÉ‡∏ô lessons ‡πÅ‡∏•‡∏∞ quizzes
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: ‡∏´‡∏ô‡πâ‡∏≤ admin ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤

4. GET /api/courses/quizzes               ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô 4+ ‡πÑ‡∏ü‡∏•‡πå Frontend
   - AddQuizzes.tsx, AddLessons.tsx, QuizSectionBar.tsx
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå: weight_percentage, is_fixed_weight, quiz_type, subject_id
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ quizzes

5. GET /api/courses/lessons               ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô lesson management
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå: weight_percentage, is_fixed_weight, subject_id
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
```

#### **üü° ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á - ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á:**
```
6. GET /api/courses/:courseId/progress    ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô student dashboard
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ logic ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏≤‡∏° weight
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

7. GET /api/courses/subjects/:id/progress ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô subject progress
   - ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì progress ‡∏ï‡∏≤‡∏° weight ‡πÅ‡∏ó‡∏ô lesson count
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: progress bar ‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

8. POST /api/courses/subjects/:id/update-progress ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô real-time update
   - ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ logic ‡πÉ‡∏´‡∏°‡πà: total_percentage, is_passed
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ö‡∏ö real-time
```

#### **üü¢ ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≥ - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô:**
```
9. GET /api/courses/lessons/subjects/all  ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô dropdowns
   - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå passing_percentage ‡πÉ‡∏ô response (optional)
   - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: ‡∏ô‡πâ‡∏≠‡∏¢ - ‡πÅ‡∏Ñ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô dropdown

10. GET /api/courses/user/progress        ‚Üê ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô user profile
    - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå total_percentage, is_passed
    - ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö: ‡∏ô‡πâ‡∏≠‡∏¢ - ‡πÅ‡∏Ñ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
```

### üõ†Ô∏è **‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà:**

#### **1. Zero-Impact Strategy (‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡πÄ‡∏•‡∏¢):**
```javascript
// ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢ DEFAULT values ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏î‡∏¥‡∏°
// ‡πÉ‡∏ô database.sql
ALTER TABLE public.subjects ADD COLUMN passing_percentage DECIMAL(5,2) DEFAULT 80.00;
ALTER TABLE public.subjects ADD COLUMN auto_distribute_score BOOLEAN DEFAULT false; -- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏õ‡∏¥‡∏î
ALTER TABLE public.quizzes ADD COLUMN weight_percentage DECIMAL(5,2) DEFAULT 0;
ALTER TABLE public.quizzes ADD COLUMN is_fixed_weight BOOLEAN DEFAULT false;

// ‡πÉ‡∏ô Subjects.js - API ‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
const response = {
  success: true,
  subjects: subjects.map(subject => ({
    // ‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏î‡∏¥‡∏° - ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á
    subject_id: subject.subject_id,
    subject_code: subject.subject_code,
    subject_name: subject.subject_name,
    // ... ‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
    
    // ‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠ auto_distribute_score = true
    ...(subject.auto_distribute_score && {
      passing_percentage: subject.passing_percentage,
      total_units: subject.total_units,
      units_description: subject.units_description,
      auto_distribute_score: subject.auto_distribute_score
    })
  }))
};
```

#### **2. Feature Flag Approach (‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ):**
```javascript
// ‚úÖ ‡πÉ‡∏ä‡πâ feature flag ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà
// ‡πÉ‡∏ô Subjects.js
const isNewScoringEnabled = subject.auto_distribute_score === true;

if (isNewScoringEnabled) {
  // ‡πÉ‡∏ä‡πâ logic ‡πÉ‡∏´‡∏°‡πà - ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
  return calculateAdvancedProgress(userId, subjectId);
} else {
  // ‡πÉ‡∏ä‡πâ logic ‡πÄ‡∏î‡∏¥‡∏° - ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
  return calculateLegacyProgress(userId, subjectId);
}
```

#### **3. Dual-Mode API (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡∏°‡πà):**
```javascript
// ‚úÖ API ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ï‡∏≤‡∏° flag
// GET /api/courses/subjects/:id/progress
router.get('/:id/progress', authenticate, async (req, res) => {
  const subject = await getSubject(req.params.id);
  
  if (subject.auto_distribute_score) {
    // ‡πÇ‡∏´‡∏°‡∏î‡πÉ‡∏´‡∏°‡πà - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≤‡∏° weight
    return res.json(await calculateWeightedProgress(req.user.id, req.params.id));
  } else {
    // ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏î‡∏¥‡∏° - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≤‡∏° lesson count (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° 100%)
    return res.json(await calculateLegacyProgress(req.user.id, req.params.id));
  }
});
```

#### **4. Conditional Frontend Rendering:**
```tsx
// ‚úÖ Frontend ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ï‡∏≤‡∏° mode
const SubjectCard = ({ subject }) => {
  return (
    <div className="subject-card">
      {/* ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏î‡∏¥‡∏° - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏™‡∏°‡∏≠ */}
      <h3>{subject.subject_name}</h3>
      <p>{subject.description}</p>
      
      {/* ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏°‡πà - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ */}
      {subject.auto_distribute_score && (
        <>
          <div className="passing-criteria">
            ‡∏ú‡πà‡∏≤‡∏ô: {subject.passing_percentage}%
          </div>
          <div className="score-management">
            <button onClick={() => openScoreTab(subject.id)}>
              ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            </button>
          </div>
        </>
      )}
    </div>
  );
};
```

### üìã **‡πÑ‡∏ü‡∏•‡πå Frontend ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó:**

#### **üî¥ ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏±‡∏ô‡∏ó‡∏µ:**
```
MOOC7/src/
‚îú‚îÄ‚îÄ dashboard/admin-creditbank/subjects/SubjectsArea.tsx     ‚Üê ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô
‚îú‚îÄ‚îÄ dashboard/instructor-dashboard/Subjects/InstSubjectsArea.tsx ‚Üê ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô  
‚îú‚îÄ‚îÄ forms/Course/AddSubjects.tsx                             ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå passing_percentage
‚îú‚îÄ‚îÄ forms/Instructor/Subjects/AddSubjects.tsx                ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå passing_percentage
‚îî‚îÄ‚îÄ components/courses/lesson/LessonArea.tsx                 ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó progress logic
```

#### **üü° ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
MOOC7/src/
‚îú‚îÄ‚îÄ forms/Course/Lessons/AddLessons.tsx                      ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå weight
‚îú‚îÄ‚îÄ forms/Instructor/Lessons/AddLessons.tsx                  ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå weight
‚îú‚îÄ‚îÄ forms/Course/Quizzes/AddQuizzes.tsx                      ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå weight, quiz_type
‚îú‚îÄ‚îÄ dashboard/admin-creditbank/QuizSectionBar.tsx            ‚Üê ‡πÅ‡∏™‡∏î‡∏á weight
‚îî‚îÄ‚îÄ components/courses/course-details/EnrolledCourseDetailsArea.tsx ‚Üê progress logic
```

### üß™ **‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**

#### **1. API Testing:**
```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
curl -H "Authorization: Bearer $TOKEN" \
     "$API_URL/api/courses/subjects"

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà
curl -H "Authorization: Bearer $TOKEN" \
     "$API_URL/api/courses/subjects" | jq '.subjects[0].passing_percentage'
```

#### **2. Frontend Testing:**
```javascript
// ‡∏ó‡∏î‡∏™‡∏≠‡∏ö backward compatibility
const subject = response.data.subjects[0];
console.log(subject.passing_percentage || 80); // ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤ default
console.log(subject.subject_name); // ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°
```

### üéØ **‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà:**

#### **1. Optimized Database Queries:**
```sql
-- ‚úÖ ‡πÉ‡∏ä‡πâ CTE ‡πÅ‡∏•‡∏∞ Window Functions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö auto-distribute
WITH subject_items AS (
  SELECT quiz_id as item_id, 'quiz' as item_type, weight_percentage, is_fixed_weight
  FROM quizzes WHERE subject_id = $1
  UNION ALL
  SELECT lesson_id as item_id, 'lesson' as item_type, weight_percentage, is_fixed_weight  
  FROM lessons WHERE subject_id = $1
),
weight_calculation AS (
  SELECT 
    item_id,
    item_type,
    CASE 
      WHEN is_fixed_weight THEN weight_percentage
      ELSE (100 - COALESCE(fixed_total, 0)) / NULLIF(auto_count, 0)
    END as calculated_weight
  FROM subject_items
  CROSS JOIN (
    SELECT 
      SUM(CASE WHEN is_fixed_weight THEN weight_percentage ELSE 0 END) as fixed_total,
      COUNT(CASE WHEN NOT is_fixed_weight THEN 1 END) as auto_count
    FROM subject_items
  ) totals
)
SELECT * FROM weight_calculation;
```

#### **2. Caching Strategy:**
```javascript
// ‚úÖ Cache weight calculations ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û
const Redis = require('redis');
const redis = Redis.createClient();

async function getSubjectWeights(subjectId) {
  const cacheKey = `subject_weights:${subjectId}`;
  let weights = await redis.get(cacheKey);
  
  if (!weights) {
    weights = await calculateSubjectWeights(subjectId);
    await redis.setex(cacheKey, 3600, JSON.stringify(weights)); // Cache 1 hour
  }
  
  return JSON.parse(weights);
}

// Invalidate cache ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
async function updateItemWeight(itemId, newWeight) {
  await updateDatabase(itemId, newWeight);
  await redis.del(`subject_weights:${getSubjectId(itemId)}`); // Clear cache
}
```

#### **3. Batch Processing:**
```javascript
// ‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
router.put('/subjects/:id/weights/batch', authenticate, async (req, res) => {
  const { updates } = req.body; // [{ itemId, itemType, weight, isFixed }]
  
  const client = await pool.connect();
  try {
    await client.query('BEGIN');
    
    // Batch update ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô transaction ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
    for (const update of updates) {
      if (update.itemType === 'quiz') {
        await client.query(
          'UPDATE quizzes SET weight_percentage = $1, is_fixed_weight = $2 WHERE quiz_id = $3',
          [update.weight, update.isFixed, update.itemId]
        );
      } else {
        await client.query(
          'UPDATE lessons SET weight_percentage = $1, is_fixed_weight = $2 WHERE lesson_id = $3',
          [update.weight, update.isFixed, update.itemId]
        );
      }
    }
    
    await client.query('COMMIT');
    
    // Clear cache
    await redis.del(`subject_weights:${req.params.id}`);
    
    res.json({ success: true, message: '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' });
  } catch (error) {
    await client.query('ROLLBACK');
    throw error;
  } finally {
    client.release();
  }
});
```

### üìà **Timeline ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°:**

#### **Phase 1: Foundation (1 ‡∏ß‡∏±‡∏ô)**
1. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (DEFAULT false/0)
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° utility functions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dual-mode
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ 100%

#### **Phase 2: Backend Logic (2 ‡∏ß‡∏±‡∏ô)**  
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á calculateAdvancedProgress() ‡πÅ‡∏•‡∏∞ calculateLegacyProgress()
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° conditional logic ‡πÉ‡∏ô APIs
3. ‡πÄ‡∏û‡∏¥‡πà‡∏° caching ‡πÅ‡∏•‡∏∞ optimization

#### **Phase 3: Frontend Enhancement (2 ‡∏ß‡∏±‡∏ô)**
1. ‡πÄ‡∏û‡∏¥‡πà‡∏° conditional rendering
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ó‡πá‡∏ö "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô" ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ
3. ‡πÄ‡∏û‡∏¥‡πà‡∏° toggle ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà

#### **Phase 4: Advanced Features (3 ‡∏ß‡∏±‡∏ô)**
1. Weight management UI
2. Real-time auto-distribute
3. Performance optimization

### ‚úÖ **‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ô‡∏µ‡πâ:**
- **‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡πÄ‡∏•‡∏¢** - auto_distribute_score = false (default)
- **‡πÄ‡∏õ‡∏¥‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤** - flexibility ‡∏™‡∏π‡∏á
- **Performance ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà** - caching, batch processing, optimized queries
- **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏á‡πà‡∏≤‡∏¢** - ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏°‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÇ‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ
- **Rollback ‡πÑ‡∏î‡πâ** - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡πá‡∏õ‡∏¥‡∏î flag ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

### ‚ö†Ô∏è **‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà):**
- **Feature Flag Management** - ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ flag ‡∏ó‡∏µ‡πà‡∏î‡∏µ
- **Data Consistency** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö weight sum = 100% ‡πÄ‡∏™‡∏°‡∏≠
- **Cache Invalidation** - ‡∏ï‡πâ‡∏≠‡∏á clear cache ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
- **Performance Monitoring** - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á dual-mode

---

## üö® **‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏û‡∏•‡∏≤‡∏î‡πÑ‡∏õ:**

### üî• **0. BigLesson Structure (‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏¥‡πÉ‡∏´‡∏ç‡πà!) - ‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö ‚ö†Ô∏è**
**‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö:**
```
Subject ‚Üí BigLesson ‚Üí Lesson (Sub-lesson)
```

**üîç ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô:**
- **BigLesson** ‡∏°‡∏µ `quiz_id` (BigLesson Quiz) ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ **+10% ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**
- **Lesson** ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô BigLesson (‡πÄ‡∏õ‡πá‡∏ô Sub-lesson)
- **‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô**: Lesson 80% + Post-test 20% + BigLesson Quiz 10% = 110% (cap ‡∏ó‡∏µ‡πà 100%)

**‚ùå ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà:**
1. **BigLesson ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ weight_percentage** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö auto-distribution
2. **BigLesson Quiz ‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏±‡∏ö‡πÅ‡∏¢‡∏Å** - ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà +10%
3. **Lesson ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö BigLesson** - ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Subject ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
4. **Auto-distribution ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏ß‡∏° BigLesson** - 3 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: Quizzes, Lessons, BigLessons

**‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:**
```sql
-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô database migration
ALTER TABLE big_lessons 
ADD COLUMN weight_percentage DECIMAL(5,2) DEFAULT 0,
ADD COLUMN is_fixed_weight BOOLEAN DEFAULT false;

-- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç lessons ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö big_lesson_id ‡πÅ‡∏ó‡∏ô subject_id ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
-- (lessons ‡∏°‡∏µ big_lesson_id ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö logic)
```

**üîß Backend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°:**
- `back_creditbank/routes/Courses/BigLessons.js` - ‡πÄ‡∏û‡∏¥‡πà‡∏° weight management
- `back_creditbank/utils/scoreDistribution.js` - ‡∏£‡∏ß‡∏° BigLesson ‡πÉ‡∏ô auto-distribution
- `back_creditbank/utils/passingCalculation.js` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BigLesson Quiz ‡πÅ‡∏¢‡∏Å

**üé® Frontend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°:**
- `MOOC7/src/dashboard/admin-creditbank/subjects/ScoreManagementTab.tsx` - ‡πÅ‡∏™‡∏î‡∏á BigLesson weights
- `MOOC7/src/forms/Course/BigLessonForm.tsx` (NEW) - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ weight ‡∏Ç‡∏≠‡∏á BigLesson
- `MOOC7/src/components/courses/WeightManager.tsx` - ‡∏£‡∏ß‡∏° BigLesson ‡πÉ‡∏ô UI

**üìä ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡πÉ‡∏´‡∏°‡πà (Nested Weights):**
- **‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å**: 16 ‚Üí **25 tasks** (+56% ‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏°)
- **Timeline ‡πÄ‡∏û‡∏¥‡πà‡∏°**: 12-15 ‚Üí **18-22 ‡∏ß‡∏±‡∏ô** (+50-70%)
- **Complexity**: High ‚Üí **Extremely High**
- **Risk**: High ‚Üí **Critical**

**üî• ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏°‡∏≤‡∏Å:**
1. **3-Level Nested Calculation** - Subject ‚Üí BigLesson ‚Üí Lesson Components
2. **Cascade Updates** - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö
3. **Real-time Validation** - ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö 100% ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö
4. **Performance Impact** - Recalculate ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
5. **UI Complexity** - ‡πÅ‡∏™‡∏î‡∏á nested weights ‡πÅ‡∏ö‡∏ö interactive

### 1. **User Roles & Permissions (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!) - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß ‚úÖ**
**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Role ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:**
- **role_id = 1**: student (‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)
- **role_id = 2**: instructor (‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô)
- **role_id = 3**: manager (‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£)
- **role_id = 4**: admin (‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö)

**‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏û‡∏£‡πâ‡∏≠‡∏° Permission Logic):**
```javascript
// üîí Helper Function ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå instructor
async function checkSubjectInstructorPermission(userId, subjectId, client) {
  // ‡∏î‡∏∂‡∏á instructor_id ‡∏à‡∏≤‡∏Å user_id
  const instructorResult = await client.query(
    'SELECT instructor_id FROM instructors WHERE user_id = $1',
    [userId]
  );
  
  if (instructorResult.rows.length === 0) {
    return false; // ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà instructor
  }
  
  const instructorId = instructorResult.rows[0].instructor_id;
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  const permissionResult = await client.query(
    'SELECT 1 FROM subject_instructors WHERE instructor_id = $1 AND subject_id = $2',
    [instructorId, subjectId]
  );
  
  return permissionResult.rows.length > 0;
}

// API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô - ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ instructor, manager, admin
router.post('/subjects/:id/scores/batch', authenticate, restrictTo(2, 3, 4), async (req, res) => {
  const client = await pool.connect();
  try {
    const subjectId = req.params.id;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
    if (req.user.role_id === 2) { // instructor
      const hasPermission = await checkSubjectInstructorPermission(req.user.id, subjectId, client);
      if (!hasPermission) {
        return res.status(403).json({ 
          success: false, 
          message: '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ' 
        });
      }
    }
    // manager (3), admin (4): ‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤
    
    // ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô...
  } finally {
    client.release();
  }
});

// API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î auto-distribute
router.put('/subjects/:id/auto-distribute', authenticate, restrictTo(2, 3, 4), async (req, res) => {
  const client = await pool.connect();
  try {
    const subjectId = req.params.id;
    const { auto_distribute_score } = req.body;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
    if (req.user.role_id === 2) { // instructor
      const hasPermission = await checkSubjectInstructorPermission(req.user.id, subjectId, client);
      if (!hasPermission) {
        return res.status(403).json({ 
          success: false, 
          message: '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ' 
        });
      }
    }
    
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï auto_distribute_score
    await client.query(
      'UPDATE subjects SET auto_distribute_score = $1, updated_at = NOW() WHERE subject_id = $2',
      [auto_distribute_score, subjectId]
    );
    
    // Log ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
    await client.query(`
      INSERT INTO score_change_logs (subject_id, user_id, action, new_values, reason, created_at)
      VALUES ($1, $2, 'toggle_auto_distribute', $3, $4, NOW())
    `, [
      subjectId, 
      req.user.id, 
      JSON.stringify({ auto_distribute_score }), 
      `‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥`
    ]);
    
  } finally {
    client.release();
  }
});

// API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç passing_percentage
router.put('/subjects/:id/passing-criteria', authenticate, restrictTo(2, 3, 4), async (req, res) => {
  const client = await pool.connect();
  try {
    const subjectId = req.params.id;
    const { passing_percentage } = req.body;
    
    // Validation
    if (passing_percentage < 0 || passing_percentage > 100) {
      return res.status(400).json({
        success: false,
        message: '‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 0-100'
      });
    }
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
    if (req.user.role_id === 2) { // instructor
      const hasPermission = await checkSubjectInstructorPermission(req.user.id, subjectId, client);
      if (!hasPermission) {
        return res.status(403).json({ 
          success: false, 
          message: '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ' 
        });
      }
    }
    
    // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö log
    const oldValueResult = await client.query(
      'SELECT passing_percentage FROM subjects WHERE subject_id = $1',
      [subjectId]
    );
    const oldValue = oldValueResult.rows[0]?.passing_percentage;
    
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï passing_percentage
    await client.query(
      'UPDATE subjects SET passing_percentage = $1, updated_at = NOW() WHERE subject_id = $2',
      [passing_percentage, subjectId]
    );
    
    // Log ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
    await client.query(`
      INSERT INTO score_change_logs (subject_id, user_id, action, old_values, new_values, reason)
      VALUES ($1, $2, 'update_passing_percentage', $3, $4, $5)
    `, [
      subjectId, 
      req.user.id, 
      JSON.stringify({ passing_percentage: oldValue }), 
      JSON.stringify({ passing_percentage }),
      `‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏Å ${oldValue}% ‡πÄ‡∏õ‡πá‡∏ô ${passing_percentage}%`
    ]);
    
  } finally {
    client.release();
  }
});
```

**üîí Matrix ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á:**
| API Function | Student (1) | Instructor (2) | Manager (3) | Admin (4) |
|--------------|-------------|----------------|-------------|-----------|
| ‡∏î‡∏π Progress ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| ‡∏î‡∏π Progress ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô | ‚ùå | ‚úÖ (‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô) | ‚úÖ (‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£) | ‚úÖ (‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô) |
| ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Weight | ‚ùå | ‚úÖ (‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô) | ‚úÖ (‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£) | ‚úÖ (‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤) |
| ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î Auto-distribute | ‚ùå | ‚úÖ (‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô) | ‚úÖ (‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£) | ‚úÖ (‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤) |
| ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Passing % | ‚ùå | ‚úÖ (‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô) | ‚úÖ (‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£) | ‚úÖ (‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤) |
| ‡∏î‡∏π Score Management Tab | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ |

### 2. **Hard-coded 65% ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà (‡∏û‡∏•‡∏≤‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç!) - ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚ö†Ô∏è**
**üîç ‡∏û‡∏ö Hard-coded values ‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå:**

#### **A. SpecialQuiz.js line 691** ‚ùå
```javascript
// ‚ùå ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ 65% ‡πÅ‡∏ö‡∏ö hard-code
const percentage = (totalScore / maxScore) * 100;
const passed = percentage > 65; // ‚Üê ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ subject.passing_percentage
```

#### **B. Learning.js line 511 & 561 & 620** ‚ùå
```javascript
// ‚ùå ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ 65% ‡πÅ‡∏ö‡∏ö hard-code (0.65)
const passed = totalScore >= maxScore * 0.65;

// ‚ùå line 561
const overallCompleted = videoCompleted && quizCompleted && (!isSpecialQuiz || (totalScore >= maxScore * 0.65));

// ‚ùå line 620  
passed: isSpecialQuiz ? false : totalScore >= maxScore * 0.65,
```

#### **C. ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Progress ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ >= 100%** (‡∏õ‡∏Å‡∏ï‡∏¥)
```javascript
// ‚úÖ ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏õ‡∏Å‡∏ï‡∏¥ (100% = ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô)
completed = percentage >= 100; // ‡πÉ‡∏ô Subjects.js, SpecialQuiz.js, Learning.js
```

**‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:**
```javascript
// ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SpecialQuiz.js
async function getSubjectPassingPercentage(quizId) {
  const result = await client.query(`
    SELECT s.passing_percentage 
    FROM subjects s
    JOIN quizzes q ON q.subject_id = s.subject_id
    WHERE q.quiz_id = $1
  `, [quizId]);
  return result.rows[0]?.passing_percentage || 80.00; // default 80%
}

// ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
const subjectPassingPercentage = await getSubjectPassingPercentage(quizId);
const passed = percentage >= subjectPassingPercentage;

// ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Learning.js (lesson quiz)
async function getLessonSubjectPassingPercentage(lessonId) {
  const result = await client.query(`
    SELECT s.passing_percentage 
    FROM subjects s
    JOIN lessons l ON l.subject_id = s.subject_id
    WHERE l.lesson_id = $1
  `, [lessonId]);
  return result.rows[0]?.passing_percentage || 80.00;
}

// ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì lesson quiz
const subjectPassingPercentage = await getLessonSubjectPassingPercentage(lessonId);
const passed = totalScore >= (maxScore * (subjectPassingPercentage / 100));
```

**üìã ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
- `back_creditbank/routes/Courses/SpecialQuiz.js` (line 691)
- `back_creditbank/routes/Courses/Learning.js` (line 511, 561, 620)
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô helper ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á passing_percentage ‡∏ï‡∏≤‡∏° quiz/lesson

### 3. **Migration Strategy ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤**
```sql
-- ‚ùå ‡∏û‡∏•‡∏≤‡∏î: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ migration script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤
-- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏´‡∏°‡πà ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ default
-- ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ existing progress ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?

-- ‚úÖ Migration Script ‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î:
UPDATE enrollments 
SET total_percentage = progress_percentage, 
    is_passed = CASE WHEN progress_percentage >= 80 THEN true ELSE false END
WHERE total_percentage IS NULL;
```

### 4. **Real-time Updates & WebSocket (‡∏Ç‡∏≤‡∏î!)**
‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö auto-distribute ‡πÅ‡∏ö‡∏ö real-time:
```javascript
// ‚ùå ‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏°‡∏µ WebSocket ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time updates
// ‡πÄ‡∏°‡∏∑‡πà‡∏≠ instructor ‡∏õ‡∏£‡∏±‡∏ö weight ‚Üí students ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

// ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°:
const io = require('socket.io')(server);

async function updateWeights(subjectId, updates) {
  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  await updateDatabase(updates);
  
  // ‡πÅ‡∏à‡πâ‡∏á real-time ‡πÑ‡∏õ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
  io.to(`subject_${subjectId}`).emit('weights_updated', {
    subjectId,
    newWeights: await getSubjectWeights(subjectId)
  });
}
```

### 5. **Error Handling & Rollback (‡∏û‡∏•‡∏≤‡∏î!)**
```javascript
// ‚ùå ‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏°‡∏µ comprehensive error handling
// ‡∏ñ‡πâ‡∏≤ auto-distribute ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏à‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢

// ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°:
async function autoDistributeWeights(subjectId) {
  const client = await pool.connect();
  try {
    await client.query('BEGIN');
    
    // Backup current weights
    const backup = await client.query(
      'SELECT item_id, item_type, weight_percentage FROM weight_backup WHERE subject_id = $1',
      [subjectId]
    );
    
    // Perform distribution
    const result = await performDistribution(subjectId);
    
    // Validate result
    if (result.totalWeight !== 100) {
      throw new Error('Weight distribution failed: total not 100%');
    }
    
    await client.query('COMMIT');
    return result;
  } catch (error) {
    await client.query('ROLLBACK');
    // Restore from backup if needed
    await restoreWeights(subjectId, backup);
    throw error;
  } finally {
    client.release();
  }
}
```

### 6. **Audit Trail & Logging (‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢‡πÑ‡∏õ!)**
```javascript
// ‚ùå ‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏°‡∏µ audit trail ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
// ‡πÉ‡∏Ñ‡∏£‡πÅ‡∏Å‡πâ‡∏≠‡∏∞‡πÑ‡∏£ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà ‡∏ó‡∏≥‡πÑ‡∏° ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ log

// ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á:
CREATE TABLE score_change_logs (
  log_id SERIAL PRIMARY KEY,
  subject_id INTEGER REFERENCES subjects(subject_id),
  user_id INTEGER REFERENCES users(user_id),
  action VARCHAR(50), -- 'auto_distribute', 'manual_adjust', 'enable_feature'
  old_values JSONB,
  new_values JSONB,
  reason TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 7. **Performance Optimization ‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î**
```javascript
// ‚ùå ‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏°‡∏µ database indexing ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö queries ‡πÉ‡∏´‡∏°‡πà
-- ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° indexes:
CREATE INDEX idx_quizzes_subject_weight ON quizzes(subject_id, weight_percentage);
CREATE INDEX idx_lessons_subject_weight ON lessons(subject_id, weight_percentage);
CREATE INDEX idx_enrollments_subject_passed ON enrollments(subject_id, is_passed);
CREATE INDEX idx_subjects_auto_distribute ON subjects(auto_distribute_score);
```

### 8. **Input Validation ‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î**
```javascript
// ‚ùå ‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏°‡∏µ comprehensive validation
const validateScoreData = {
  passing_percentage: {
    type: 'number',
    min: 0,
    max: 100,
    required: true
  },
  weight_percentage: {
    type: 'number',
    min: 0,
    max: 100,
    required: true
  },
  auto_distribute_score: {
    type: 'boolean',
    required: true
  }
};
```

### 9. **Mobile Responsiveness (UI ‡∏û‡∏•‡∏≤‡∏î!)**
```css
/* ‚ùå ‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏°‡∏µ mobile-first design ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö weight management */
@media (max-width: 768px) {
  .weight-manager-container {
    flex-direction: column;
  }
  
  .weight-slider {
    width: 100%;
    margin: 0.5rem 0;
  }
  
  .score-tab-button {
    font-size: 0.875rem;
    padding: 0.5rem 1rem;
  }
}
```

### 10. **Testing Strategy ‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢‡πÑ‡∏õ!**
```javascript
// ‚ùå ‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏°‡∏µ test cases ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö edge cases
describe('Auto Distribution', () => {
  test('should handle division by zero', () => {
    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ auto items ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?
  });
  
  test('should handle 100% fixed items', () => {
    // ‡∏ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å item ‡πÄ‡∏õ‡πá‡∏ô fixed = 100% ‡∏à‡∏∞‡∏ó‡∏≥‡∏¢‡∏±‡∏á‡πÑ‡∏á?
  });
  
  test('should handle concurrent updates', () => {
    // ‡∏ñ‡πâ‡∏≤ 2 ‡∏Ñ‡∏ô‡πÅ‡∏Å‡πâ weight ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?
  });
});
```

---

## üìä **‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏•‡∏≤‡∏î‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:**

### üö® **Critical Issues (‡πÅ‡∏Å‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ):**
1. **User Roles & Permissions** - ‡πÑ‡∏°‡πà‡∏°‡∏µ `subject_instructors` permission check
2. **Hard-coded 65%** - ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô 3 ‡πÑ‡∏ü‡∏•‡πå (SpecialQuiz.js, Learning.js)
3. **Migration Strategy** - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ú‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤
4. **Audit Trail** - ‡πÑ‡∏°‡πà‡∏°‡∏µ `score_change_logs` table

### ‚ö° **Performance Issues (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç):**
5. **Database Indexing** - ‡πÑ‡∏°‡πà‡∏°‡∏µ indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö queries ‡πÉ‡∏´‡∏°‡πà
6. **Real-time Updates** - ‡πÑ‡∏°‡πà‡∏°‡∏µ WebSocket ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö live updates
7. **Error Handling** - ‡πÑ‡∏°‡πà‡∏°‡∏µ comprehensive rollback strategy

### üé® **UX/UI Issues (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á):**
8. **Mobile Responsiveness** - Weight management ‡πÑ‡∏°‡πà responsive
9. **Input Validation** - ‡πÑ‡∏°‡πà‡∏°‡∏µ comprehensive validation schema
10. **Testing Strategy** - ‡πÑ‡∏°‡πà‡∏°‡∏µ edge case testing

### üìà **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏û‡∏ö BigLesson):**
- **‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô**: 6 ‚Üí **20 tasks** (+233%)
- **Timeline ‡πÄ‡∏û‡∏¥‡πà‡∏°**: 8 ‚Üí **15-18 ‡∏ß‡∏±‡∏ô** (+87-125%)
- **Complexity**: **Medium** ‚Üí **Very High**
- **Risk Level**: **Medium** ‚Üí **Critical**

### üî• **BigLesson Impact Analysis:**
**‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏´‡∏•‡∏±‡∏Å:**
1. **Auto-Distribution Logic** - ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏ß‡∏° 3 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: Quizzes, Lessons, BigLessons
2. **Weight Calculation** - BigLesson Quiz ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà +10% ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô weight ‡πÅ‡∏¢‡∏Å
3. **Database Structure** - big_lessons ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ weight_percentage, is_fixed_weight
4. **API Endpoints** - BigLessons.js ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ weight management
5. **Frontend UI** - ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ BigLesson weights

**Logic ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Pre/Post-test):**
```
Subject 100% = Post-test % + BigLesson1 % + BigLesson2 % + ...
Pre-test = ‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ñ‡πà‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)

BigLesson 100% = BigLesson Quiz % + Lesson1.1 % + Lesson1.2 % + ...
  ‚îú‚îÄ‚îÄ BigLesson Quiz (‡πÄ‡∏ä‡πà‡∏ô 30%)
  ‚îú‚îÄ‚îÄ Lesson 1.1 (‡πÄ‡∏ä‡πà‡∏ô 35%) 
  ‚îÇ   ‚îú‚îÄ‚îÄ Video (‡πÄ‡∏ä‡πà‡∏ô 20%)
  ‚îÇ   ‚îî‚îÄ‚îÄ Test Lesson (‡πÄ‡∏ä‡πà‡∏ô 15%) ‚Üê ‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á 25% ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà BigLesson ‡∏ï‡πâ‡∏≠‡∏á detect
  ‚îî‚îÄ‚îÄ Lesson 1.2 (‡πÄ‡∏ä‡πà‡∏ô 35%)

‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Pre/Post-test:
- Pre-test: ‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô) ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö
- Post-test: ‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô) ‚Üí ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á Subject 100%
- ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö: Post-test - Pre-test = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
```

**üéØ Pre/Post-test Logic ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:**
1. **Pre-test**: 
   - ‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ä‡∏≤
   - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö
   - ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (prerequisite)
   - ‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏î baseline knowledge

2. **Post-test**:
   - ‡∏ô‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ä‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô 20%)
   - ‡∏ó‡∏≥‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏ö
   - ‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

3. **‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå**:
   - Learning Gain = Post-test - Pre-test
   - Effectiveness = (Post-test - Pre-test) / (100 - Pre-test)
   - ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏´‡πâ instructor ‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

**üî• ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏à‡∏£‡∏¥‡∏á:**
1. **Nested Auto-Distribution** - BigLesson ‡∏ï‡πâ‡∏≠‡∏á auto-distribute ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
2. **Cascade Weight Changes** - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô test lesson ‚Üí ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠ BigLesson ‚Üí ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠ Subject
3. **Multi-Level Validation** - ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö 100% ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö
4. **Component Detection** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ Video + Quiz = Lesson weight
5. **Real-time Recalculation** - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤‡πÑ‡∏´‡∏ô‡∏ï‡πâ‡∏≠‡∏á recalculate ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö

**üîß Backend Logic ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°:**
```javascript
// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Test Lesson 1.1 ‡πÄ‡∏õ‡πá‡∏ô 25%
async function updateLessonQuizWeight(lessonId, newQuizWeight) {
  // 1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó lesson quiz weight
  await updateLessonQuiz(lessonId, newQuizWeight);
  
  // 2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì lesson total weight ‡πÉ‡∏´‡∏°‡πà (video + quiz)
  const lessonTotalWeight = await calculateLessonTotalWeight(lessonId);
  
  // 3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó lesson weight ‡πÉ‡∏ô BigLesson
  await updateLessonInBigLesson(lessonId, lessonTotalWeight);
  
  // 4. Auto-distribute BigLesson weights ‡πÉ‡∏´‡∏°‡πà
  const bigLessonId = await getBigLessonId(lessonId);
  await autoDistributeBigLessonWeights(bigLessonId);
  
  // 5. Auto-distribute Subject weights ‡πÉ‡∏´‡∏°‡πà
  const subjectId = await getSubjectId(bigLessonId);
  await autoDistributeSubjectWeights(subjectId);
  
  // 6. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ó‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  await recalculateAllStudentScores(subjectId);
}
```

**üìä Database Schema ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°:**
```sql
-- lessons ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö component weights
ALTER TABLE lessons 
ADD COLUMN video_weight_percentage DECIMAL(5,2) DEFAULT 50.00,
ADD COLUMN quiz_weight_percentage DECIMAL(5,2) DEFAULT 50.00,
ADD COLUMN total_weight_in_biglesson DECIMAL(5,2) DEFAULT 0;

-- big_lessons ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö internal distribution
ALTER TABLE big_lessons
ADD COLUMN quiz_weight_percentage DECIMAL(5,2) DEFAULT 30.00,
ADD COLUMN lessons_total_weight DECIMAL(5,2) DEFAULT 70.00;

-- enrollments ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö pre-test scores ‡πÅ‡∏¢‡∏Å (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)
ALTER TABLE enrollments 
ADD COLUMN pre_test_score DECIMAL(5,2) DEFAULT 0,  -- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô pre-test (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡πÉ‡∏ô total)
ADD COLUMN post_test_score DECIMAL(5,2) DEFAULT 0, -- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô post-test (‡∏ô‡∏±‡∏ö‡πÉ‡∏ô total)
ADD COLUMN learning_gain DECIMAL(5,2) DEFAULT 0;   -- post - pre (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå)

-- quiz_attempts ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å pre/post-test
ALTER TABLE quiz_attempts 
ADD COLUMN is_pre_test BOOLEAN DEFAULT false,      -- ‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô pre-test ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
ADD COLUMN affects_grade BOOLEAN DEFAULT true;     -- ‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
```

**üîß Backend Logic ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö:**
```javascript
// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤ (‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏° pre-test)
async function calculateSubjectScore(userId, subjectId) {
  const subjectData = await getSubjectData(subjectId);
  
  let totalScore = 0;
  
  // 1. Post-test score (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
  if (subjectData.post_test_id) {
    const postTestScore = await getPostTestScore(userId, subjectData.post_test_id);
    totalScore += (postTestScore * subjectData.post_test_weight / 100);
  }
  
  // 2. BigLesson scores
  for (const bigLesson of subjectData.bigLessons) {
    const bigLessonScore = await calculateBigLessonScore(userId, bigLesson.id);
    totalScore += (bigLessonScore * bigLesson.weight_percentage / 100);
  }
  
  return totalScore;
}

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Learning Gain (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö analytics)
async function calculateLearningGain(userId, subjectId) {
  const preTestScore = await getPreTestScore(userId, subjectId);
  const postTestScore = await getPostTestScore(userId, subjectId);
  
  const learningGain = postTestScore - preTestScore;
  const effectiveness = (postTestScore - preTestScore) / (100 - preTestScore);
  
  return { learningGain, effectiveness };
}
```

### üéØ **‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á BigLesson):**
1. **Phase 1 (Critical)**: BigLesson Structure, Roles, Hard-coded values, Migration
2. **Phase 2 (Core Logic)**: Auto-distribution with BigLesson, Weight calculation
3. **Phase 3 (Performance)**: Indexing, Error handling, Validation  
4. **Phase 4 (Enhancement)**: Real-time, Mobile UI, Testing

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠**: ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô **4 phases** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î risk ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏° 1 phase ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ BigLesson complexity) üöÄ

---

## üìã **‡∏™‡∏£‡∏∏‡∏õ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Executive Summary)**

### üéØ **‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å:**
‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô **Auto-Distribution 100%** ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà **User ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á** ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ 65% ‡πÅ‡∏ö‡∏ö‡∏ï‡∏≤‡∏¢‡∏ï‡∏±‡∏ß

### üìä **‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏á‡∏≤‡∏ô (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á BigLesson):**
- **6 ‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å** ‚Üí **20 ‡∏á‡∏≤‡∏ô** (‡πÄ‡∏û‡∏¥‡πà‡∏° 14 ‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô + BigLesson)
- **5 ‡πÑ‡∏ü‡∏•‡πå Backend** + **10 ‡πÑ‡∏ü‡∏•‡πå Frontend** + **1 Database Migration** (‡∏£‡∏ß‡∏° BigLesson)
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°** (‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà)
- **Backward Compatible** (‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ)
- **3-Level Structure** (Subject ‚Üí BigLesson ‚Üí Lesson)

### üîß **Core Features (‡∏£‡∏ß‡∏° BigLesson):**
1. **Auto Weight Distribution** - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ 100% (Quizzes + Lessons + BigLessons)
2. **Custom Passing Criteria** - ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏ß‡∏¥‡∏ä‡∏≤ (‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà 65%)
3. **Fixed vs Auto Weights** - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÑ‡∏î‡πâ‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
4. **3-Level Structure Support** - Subject ‚Üí BigLesson ‚Üí Lesson hierarchy
5. **BigLesson Quiz Management** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ BigLesson Quiz ‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å +10%
6. **Pre/Post Test Logic** - ‡πÅ‡∏¢‡∏Å logic ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô/‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
7. **Real-time Updates** - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö real-time

### üö® **Critical Issues ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏£‡∏ß‡∏° BigLesson):**
- **BigLesson Structure** - ‡πÄ‡∏û‡∏¥‡πà‡∏° weight management ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö BigLesson
- **3-Level Auto-Distribution** - Quizzes + Lessons + BigLessons = 100%
- **User Permissions** - ‡πÄ‡∏û‡∏¥‡πà‡∏° subject_instructors checking
- **Hard-coded 65%** - ‡πÅ‡∏Å‡πâ 3 ‡∏à‡∏∏‡∏î‡πÉ‡∏ô SpecialQuiz.js, Learning.js
- **Migration Strategy** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ + BigLesson weights
- **Audit Trail** - ‡πÄ‡∏û‡∏¥‡πà‡∏° logging system
- **Performance** - ‡πÄ‡∏û‡∏¥‡πà‡∏° database indexes ‡∏£‡∏ß‡∏° BigLesson

### üìà **Impact (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á BigLesson):**
- **Timeline**: 8 ‚Üí 15-18 ‡∏ß‡∏±‡∏ô (+87-125%)
- **Complexity**: Medium ‚Üí Very High
- **Tasks**: 6 ‚Üí 20 (+233%)
- **Risk**: Medium ‚Üí Critical (‡πÄ‡∏û‡∏£‡∏≤‡∏∞ 3-level structure complexity)

### üéØ **Implementation Strategy (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á BigLesson):**
**Phase 1 (Critical)**: BigLesson Structure, Security, Migration, Hard-coded fixes
**Phase 2 (Core Logic)**: 3-Level Auto-distribution, Weight calculation with BigLesson
**Phase 3 (Performance)**: Indexing, Error handling, Validation
**Phase 4 (Enhancement)**: Real-time, Mobile UI, Testing

### ‚úÖ **Success Criteria:**
- ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ 100%
- ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- Performance ‡πÑ‡∏°‡πà‡∏ä‡πâ‡∏≤‡∏•‡∏á
- ‡∏°‡∏µ audit trail ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- Mobile responsive

---

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°)

### üéØ **Logic ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á:**
1. **65% ‚Üí User ‡∏Å‡∏≥‡∏´‡∏ô‡∏î** - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô 65% ‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏´‡πâ user ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á
2. **Manual ‚Üí Auto-distribute** - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏≠‡∏á ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
3. **Fixed % ‚Üí Dynamic %** - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
4. **Single test ‚Üí Pre/Post test** - ‡πÅ‡∏¢‡∏Å logic ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô/‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô

### üîÑ **‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà:**
1. **‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏´‡∏°‡πà** ‚Üí ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
2. **‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏£‡∏Å** ‚Üí ‡πÑ‡∏î‡πâ 100% ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
3. **‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà 2** ‚Üí ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 50%/50%
4. **‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà 3** ‚Üí ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 33.33%/33.33%/33.33%
5. **Fix ‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£** ‚Üí ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÉ‡∏ô % ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
6. **‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô** ‚Üí ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≤‡∏° weight ‚Üí ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô

### ‚ö†Ô∏è **‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á:**
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤**: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ migration script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°
- **Performance**: ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì auto-distribute ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡πá‡∏ß
- **Consistency**: ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ú‡∏•‡∏£‡∏ß‡∏° = 100% ‡πÄ‡∏™‡∏°‡∏≠
- **User Experience**: UI ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ö‡∏ö real-time

---

## üö® **‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°: ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (Student Learning Interface)**

### 6. ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà

**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
**‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**:
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç hardcode 65% ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞ progress ‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á pre-test ‡πÅ‡∏•‡∏∞ post-test ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å
- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤
- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Learning Gain ‡πÅ‡∏•‡∏∞ analytics

**üé® Frontend Files ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:**
```
MOOC7/src/
‚îú‚îÄ‚îÄ components/courses/lesson/
‚îÇ   ‚îú‚îÄ‚îÄ LessonQuiz.tsx               ‚Üê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç hardcode PASSING_PERCENTAGE = 65
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏¢‡∏ï‡∏±‡∏ß 65% ‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• pre-test vs post-test
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á Learning Gain
‚îÇ   ‚îú‚îÄ‚îÄ LessonArea.tsx               ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï progress calculation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö weighted progress ‡πÅ‡∏ó‡∏ô lesson count
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö pre-test requirements
‚îÇ   ‚îî‚îÄ‚îÄ LessonFaq.tsx                ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï progress display
‚îú‚îÄ‚îÄ components/courses/course-details/
‚îÇ   ‚îú‚îÄ‚îÄ EnrolledCourseDetailsArea.tsx ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï subject progress display
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡πÅ‡∏™‡∏î‡∏á weighted progress ‡πÅ‡∏ó‡∏ô lesson completion
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô/‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îú‚îÄ‚îÄ EnrolledSidebar.tsx          ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï course progress calculation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì progress ‡∏ï‡∏≤‡∏° weight
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö pre-test indicators
‚îÇ   ‚îî‚îÄ‚îÄ CourseProgressIndicator.tsx  ‚Üê **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà** ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
‚îú‚îÄ‚îÄ dashboard/student-dashboard/
‚îÇ   ‚îú‚îÄ‚îÄ student-dashboard/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StudentDashboardArea.tsx ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï overview statistics
‚îÇ   ‚îú‚îÄ‚îÄ student-enrolled-courses/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StudentEnrolledCoursesArea.tsx ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï course cards progress
‚îÇ   ‚îî‚îÄ‚îÄ student-progress/
‚îÇ       ‚îú‚îÄ‚îÄ StudentProgressArea.tsx  ‚Üê **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà** ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
‚îÇ       ‚îú‚îÄ‚îÄ SubjectProgressCard.tsx  ‚Üê **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà** ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤
‚îÇ       ‚îî‚îÄ‚îÄ LearningGainAnalysis.tsx ‚Üê **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà** ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Learning Gain
```

**üîß Backend API ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á:**
```
back_creditbank/
‚îú‚îÄ‚îÄ routes/Courses/
‚îÇ   ‚îú‚îÄ‚îÄ Learning.js                 ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏° API ‡∏î‡∏∂‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö frontend
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GET /api/learn/subject/:id/passing-criteria ‚Üê ‡∏î‡∏∂‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GET /api/learn/subject/:id/progress-detail ‚Üê progress ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PUT /api/learn/update-progress ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï progress ‡πÅ‡∏ö‡∏ö weighted
‚îÇ   ‚îú‚îÄ‚îÄ Enrollments.js              ‚Üê ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï progress calculation APIs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GET /api/courses/:id/progress ‚Üê ‡πÉ‡∏ä‡πâ weighted calculation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GET /api/courses/user/progress ‚Üê progress ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á user
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GET /api/courses/:id/learning-analytics ‚Üê **‡πÉ‡∏´‡∏°‡πà** analytics
‚îÇ   ‚îî‚îÄ‚îÄ StudentProgress.js          ‚Üê **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà** APIs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö student dashboard
‚îÇ       ‚îú‚îÄ‚îÄ GET /api/student/dashboard/overview ‚Üê overview ‡πÉ‡∏´‡∏°‡πà
‚îÇ       ‚îú‚îÄ‚îÄ GET /api/student/subjects/:id/detailed-progress ‚Üê progress ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤
‚îÇ       ‚îî‚îÄ‚îÄ GET /api/student/learning-gain-analysis ‚Üê ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ
```

**üíæ Additional Features:**
1. **Real-time Progress Updates** - progress ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ö‡∏ö real-time ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
2. **Learning Analytics Dashboard** - ‡πÅ‡∏™‡∏î‡∏á Learning Gain ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
3. **Pre-test Requirements** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ó‡∏≥ pre-test ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
4. **Adaptive Feedback** - ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
5. **Progress Comparison** - ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö pre-test vs post-test
6. **Custom Passing Indicators** - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤

### 7. ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö Student Dashboard ‡πÅ‡∏•‡∏∞ Analytics

**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà**: ‡∏™‡∏£‡πâ‡∏≤‡∏á dashboard ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡∏°‡πà
**‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**:
- ‡πÅ‡∏™‡∏î‡∏á weighted progress ‡πÅ‡∏ó‡∏ô lesson completion percentage
- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å  
- ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Learning Gain (pre-test vs post-test)
- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô

**üìä Learning Analytics Features:**
- **Pre/Post Test Comparison** - ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- **Subject Performance Matrix** - ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏ö‡∏ö matrix
- **Learning Efficiency Score** - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- **Adaptive Recommendations** - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
- **Progress Forecasting** - ‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤

### 8. Mobile Optimization ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Student Interface

**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà**: ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á responsive design ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
**‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**:
- ‡∏õ‡∏£‡∏±‡∏ö UI ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
- ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á touch interaction ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
- ‡πÄ‡∏û‡∏¥‡πà‡∏° offline capability ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• progress ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠

**üì± Mobile-specific Features:**
- **Touch-optimized Quiz Interface** - UI ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™
- **Offline Progress Sync** - ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ online
- **Mobile-first Analytics** - ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
- **Progressive Web App (PWA)** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠

---

## üö® **‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:**

### **1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç LessonQuiz.tsx (Critical)**
```typescript
// ‚ùå ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
const PASSING_PERCENTAGE = 65;

// ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô
const [passingPercentage, setPassingPercentage] = useState(80);

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô
const fetchPassingCriteria = async () => {
  try {
    const response = await axios.get(`${API_URL}/api/learn/subject/${subjectId}/passing-criteria`);
    setPassingPercentage(response.data.passing_percentage);
  } catch (error) {
    console.error('Error fetching passing criteria:', error);
    setPassingPercentage(80); // default
  }
};

// ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
const passed = percentage >= passingPercentage;
```

### **2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç LessonArea.tsx Progress Calculation**
```typescript
// ‚ùå ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å lesson completion
const progressPercentage = (completedLessons / totalLessons) * 100;

// ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á
const calculateRealScoreProgress = () => {
  let totalScore = 0;
  let maxPossibleScore = 0;
  
  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å quiz ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏° video)
  lessonData.forEach(section => {
    section.items.forEach(item => {
      if (item.type === "quiz") {
        maxPossibleScore += item.maxScore || 0;
        if (item.completed) {
          totalScore += item.score || 0;
        }
      }
    });
  });
  
  return maxPossibleScore > 0 ? (totalScore / maxPossibleScore) * 100 : 0;
};
```

### **3. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Student Dashboard Progress Display**
```typescript
// ‚ùå ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡πÅ‡∏™‡∏î‡∏á lesson completion
<div className="progress-bar">
  <div className="progress-fill" style={{width: `${lessonProgress}%`}}></div>
</div>

// ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á + ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô
<div className="score-display">
  <div className="current-score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: {currentScore}/{maxScore}</div>
  <div className="passing-criteria">‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô: {passingPercentage}%</div>
  <div className="progress-bar">
    <div className="progress-fill" style={{width: `${scorePercentage}%`}}></div>
  </div>
  <div className="status">
    {scorePercentage >= passingPercentage ? '‡∏ú‡πà‡∏≤‡∏ô' : '‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô'}
  </div>
</div>
```

### **4. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Backend Progress APIs**
```javascript
// ‚ùå ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å lesson count
const progressPercentage = (completedLessons / totalLessons) * 100;

// ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á
const calculateWeightedProgress = async (userId, subjectId) => {
  // ‡∏î‡∏∂‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å quiz ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
  const quizScores = await getQuizScores(userId, subjectId);
  
  let totalScore = 0;
  let maxPossibleScore = 0;
  
  quizScores.forEach(quiz => {
    maxPossibleScore += quiz.maxScore;
    if (quiz.completed) {
      totalScore += quiz.score;
    }
  });
  
  return maxPossibleScore > 0 ? (totalScore / maxPossibleScore) * 100 : 0;
};
```

### **5. ‡πÄ‡∏û‡∏¥‡πà‡∏° Real-time Score Updates**
```typescript
// ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° WebSocket ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time updates
useEffect(() => {
  const socket = io(API_URL);
  
  socket.on('score_updated', (data) => {
    if (data.subjectId === subjectId) {
      // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ö‡∏ö real-time
      setCurrentScore(data.newScore);
      setScorePercentage((data.newScore / data.maxScore) * 100);
    }
  });
  
  return () => socket.disconnect();
}, [subjectId]);
```

### **6. ‡πÄ‡∏û‡∏¥‡πà‡∏° Learning Analytics**
```typescript
// ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á component ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Learning Analytics
const LearningGainAnalysis = ({ preTestScore, postTestScore }) => {
  const learningGain = postTestScore - preTestScore;
  const effectiveness = preTestScore > 0 ? (learningGain / (100 - preTestScore)) * 100 : 0;
  
  return (
    <div className="learning-analytics">
      <h3>‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</h3>
      <div className="gain-indicator">
        <span>Learning Gain: {learningGain > 0 ? '+' : ''}{learningGain}%</span>
        <span>‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û: {effectiveness.toFixed(1)}%</span>
      </div>
    </div>
  );
};
```

---

## üìä **‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö:**

### **Frontend Changes (8 files):**
1. **LessonQuiz.tsx** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç hardcode 65%, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô
2. **LessonArea.tsx** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç progress calculation
3. **EnrolledCourseDetailsArea.tsx** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç subject progress display
4. **StudentDashboardArea.tsx** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç overview statistics
5. **StudentEnrolledCoursesArea.tsx** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç course cards
6. **CourseProgressIndicator.tsx** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
7. **StudentProgressArea.tsx** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
8. **LearningGainAnalysis.tsx** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

### **Backend Changes (4 files):**
1. **Learning.js** - ‡πÄ‡∏û‡∏¥‡πà‡∏° APIs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞ progress ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà
2. **Enrollments.js** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç progress calculation
3. **StudentProgress.js** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
4. **LearningAnalytics.js** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

### **Database Changes:**
- ‡πÉ‡∏ä‡πâ existing columns: `passing_percentage`, `weight_percentage`
- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° columns ‡πÉ‡∏´‡∏°‡πà

---

## ‚è∞ **Timeline ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Student Interface:**
- **Phase 1 (2 ‡∏ß‡∏±‡∏ô)**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç hardcode 65% ‡πÅ‡∏•‡∏∞ progress calculation
- **Phase 2 (2 ‡∏ß‡∏±‡∏ô)**: ‡∏™‡∏£‡πâ‡∏≤‡∏á real-time updates ‡πÅ‡∏•‡∏∞ analytics
- **Phase 3 (1 ‡∏ß‡∏±‡∏ô)**: Mobile optimization ‡πÅ‡∏•‡∏∞ testing

**‡∏£‡∏ß‡∏°: 5 ‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Student Interface**